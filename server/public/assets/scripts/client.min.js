/*! mygigs 2016-02-06 */
var app=angular.module("myGigsApp",["ngRoute"]).directive("formatDate",function(){return{require:"ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){return new Date(a)})}}});app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"HomeController"}).when("/home",{templateUrl:"views/home.html",controller:"HomeController"}).when("/newGig",{templateUrl:"views/newGig.html",controller:"newGigController"}).when("/detailedGig",{templateUrl:"views/detailedGig.html",controller:"detailedGigController"}),b.html5Mode(!0)}]),app.controller("HomeController",["$scope","$http","$location",function(a,b,c){a.data=[];var d=function(){b.get("/getAllGigs").then(function(b){a.gigs=b.data})};a.removeSelectedGigs=function(){for(var c=0;c<a.gigs.length;c++)a.gigs[c].toRemove&&b["delete"]("/gigDelete"+a.gigs[c]._id).then(d)},d()}]),app.controller("newGigController",["$scope","$http","$location",function(a,b,c){a.sendData=function(){console.log(a.data);var d=document.forms.form.group.value;return null==d||""==d?(alert("Not so fast tiger! At least give us the Group Name."),!1):void b.post("/addGig",a.data).then(function(a){200===a.status?c.path("/home"):console.log("error")})}}]),app.controller("detailedGigController",["$scope","$http","$location",function(a,b,c){a.data=[];var d=function(){b.get("/getAllGigs").then(function(b){a.gigs=b.data,a.data.group=a.gigs[0].group,a.data.address=a.gigs[0].address,a.data.eventTime=a.gigs[0].eventTime,a.data.endTime=a.gigs[0].endTime,a.data.goneUntil=a.gigs[0].goneUntil,a.data.todo=a.gigs[0].todo,a.data.pay=a.gigs[0].pay,a.data.yesCharts=a.gigs[0].yesCharts,a.data.noCharts=a.gigs[0].noCharts,a.data.yesPDiem=a.gigs[0].yesPDiem,a.data.noPDiem=a.gigs[0].noPDiem})};a.removeSelectedGigs=function(){for(var c=0;c<a.gigs.length;c++)a.gigs[c].toRemove&&b["delete"]("/gigDelete"+a.gigs[c]._id).then(fetchGigs),a.data.group=gigs[c]._id},d()}]);